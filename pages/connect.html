<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>连线小游戏</title>
        <link rel="stylesheet" href="../css/common.css" />
        <link rel="stylesheet" href="../css/connect.css" />
    </head>
    <body>
        <div id="app" class="game-container">
            <div id="stage" class="stage">
                <!-- P1: 欢迎页 -->
                <div id="page-welcome" class="page active">
                    <img class="full-bg" src="../images/game2/welcome_bg.png" />
                    <img
                        class="page-welcome-mask"
                        src="../images/game2/welcom_mask.png"
                    />
                    <img
                        class="page-logo right"
                        src="../images/game2/memory_logo.png"
                    />
                    <img
                        class="page-dialogBG"
                        src="../images/game2/welcome_txt_bg.png"
                    />

                    <!-- 新增两行文本 -->
                    <div class="page-texts-title">
                        <p class="line2">欢迎来到<br />连连看小练习</p>
                    </div>

                    <div class="page-texts welcome">
                        <p class="line1">你好呀,</p>
                        <p class="line2">准备好挑战成为</p>
                        <p class="line2">数字记忆达人了吗？</p>
                    </div>
                    <button
                        class="btn btn-welcome"
                        onclick="ConnectGame.nextPage()"
                    ></button>
                </div>

                <div id="page-rule-1" class="page">
                    <img class="full-bg" src="../images/game2/rule_bg.png" />
                    <img
                        class="page-logo left"
                        src="../images/game2/memory_logo.png"
                    />
                    <img
                        class="page-rule-mask"
                        src="../images/game2/burble_2.png"
                    />
                    <div class="page-content">
                        <div class="page-texts rule1">
                            <p class="line1">让我们来看看规则吧</p>
                            <p class="line2">接下来,</p>
                            <p class="line1">你将看到一些数字，</p>
                            <p class="line2">
                                请从"1"开始<span class="rule-text-yellow"
                                    >按照从小</span
                                >
                            </p>
                            <p class="line2">
                                <span class="rule-text-yellow">到大的顺序</span
                                >点击数字,又
                            </p>
                            <p class="line2">快又准地将它们连起来。</p>
                        </div>

                        <img
                            class="rule2-example"
                            src="../images/game2/memory_logo.png"
                        />

                        <button
                            class="btn btn-bottom long startTutorial"
                            onclick="ConnectGame.nextPage()"
                        ></button>
                    </div>
                </div>
                <div id="page-rule-2" class="page">
                    <img
                        class="page-logo right1"
                        src="../images/game1/attention_logo.png"
                    />
                    <img
                        class="page-rule-mask"
                        src="../images/game1/normal_bg.png"
                    />
                    <div class="page-content">
                        <div class="page-texts rule1">
                            <p class="line2">比如，下面出现了3个数字</p>
                            <p class="line2">我没需要快速按照“1、2、3”</p>
                            <p class="line2">的顺序点击，</p>
                            <p class="line2">将它们连起来就算成功</p>
                        </div>
                        <button
                            class="btn btn-bottom long rule1"
                            onclick="ConnectGame.showTutorial()"
                        ></button>
                    </div>
                </div>

                <!-- P2: 新手引导页 -->
                <div id="page-tutorial" class="page">
                    <img
                        class="test-logo"
                        src="../images/game2/input_logo.png"
                    />
                    <img
                        class="test-tip-bg"
                        src="../images/game2/input_txt.png"
                    />

                    <div class="game-area">
                        <canvas
                            id="tutorial-canvas"
                            class="game-canvas"
                        ></canvas>
                        <div
                            id="tutorial-numbers"
                            class="numbers-container"
                        ></div>
                    </div>
                </div>

                <!-- P3: 游戏主界面 -->
                <div id="page-game" class="page">
                    <img
                        class="test-logo"
                        src="../images/game2/input_logo.png"
                    />
                    <img
                        class="test-tip-bg"
                        src="../images/game2/input_txt.png"
                    />
                    <div class="game-header">
                        <div class="header-left">
                            <button
                                class="btn-back"
                                onclick="ConnectGame.confirmExit()"
                            >
                                <span>←</span>
                            </button>
                        </div>
                        <div class="header-center">
                            <div class="timer-display">
                                <span class="timer-icon">⏱</span>
                                <span id="timer-text">00:00.0</span>
                            </div>
                        </div>
                        <div class="header-right">
                            <div class="target-hint">
                                寻找数字：<span id="target-number">1</span>
                            </div>
                        </div>
                    </div>

                    <div class="game-area">
                        <canvas id="game-canvas" class="game-canvas"></canvas>
                        <div id="game-numbers" class="numbers-container"></div>
                    </div>
                </div>

                <div id="page-task" class="page">
                    <img
                        class="page-task-mask"
                        src="../images/game1/normal_bg.png"
                    />
                    <div class="logo-flip">
                        <img
                            class="page-logo bottom"
                            src="../images/game1/attention_logo.png"
                        />
                    </div>

                    <div class="page-content">
                        <div class="page-texts task">
                            <p class="line2">太棒了 🎉</p>
                            <p class="line2">你已经能准确找到所有</p>
                            <p class="line2">符合要求的字母了。</p>
                            <p
                                class="line2"
                                style="height: 0.7em; margin: 0"
                            ></p>
                            <p class="line2">接下来</p>
                            <p class="line2">我们将进入7关正式挑战</p>
                            <p class="line2">
                                每关<span class="rule-text-red">限时70秒</span>,
                            </p>
                            <p class="line2">倒计时结束将自动进入下一关</p>
                            <p
                                class="line2"
                                style="height: 0.7em; margin: 0"
                            ></p>

                            <p class="line2">提前完成可手动进入下一关</p>
                        </div>
                        <button
                            class="btn btn-bottom long task"
                            onclick="ConnectGame.startGame()"
                        ></button>
                    </div>
                </div>

                <div id="page-result" class="page">
                    <img
                        class="page-logo left2 result"
                        src="../images/game2/memory_logo.png"
                    />
                    <img
                        class="page-mask-result"
                        src="../images/game2/burble_1.png"
                    />
                    <div class="page-content">
                        <div class="page-texts result">
                            <p class="line2">挑战结束 🎉</p>
                            <p class="line2">让我们看看作答结果吧!</p>
                        </div>

                        <div class="result-card">
                            <div class="stat-item blue">
                                <div class="stat-value" id="stat-blue">
                                    00:00
                                </div>
                                <div class="stat-label">作答时间</div>
                            </div>
                            <div class="stat-item green">
                                <div class="stat-value" id="stat-green">0%</div>
                                <div class="stat-label">正确率</div>
                            </div>
                            <div class="stat-item purple">
                                <div class="stat-value" id="stat-purple">0</div>
                                <div class="stat-label">最长中断时间</div>
                            </div>
                            <div class="stat-item orange">
                                <div class="stat-value" id="stat-orange">0</div>
                                <div class="stat-label">最短中断时间</div>
                            </div>
                        </div>
                        <button
                            class="btn btn-bottom long detail"
                            onclick="ConnectGame.viewDetails()"
                        ></button>
                        <button
                            class="btn btn-bottom long again"
                            onclick="ConnectGame.restart()"
                        ></button>
                    </div>
                </div>

                <!-- P5: 作答详情页 -->
                <div id="page-details" class="page">
                    <div class="details-header">
                        <h2 class="details-title">作答详情</h2>
                    </div>

                    <div class="details-container">
                        <table class="details-table" id="details-table">
                            <thead>
                                <tr>
                                    <th>数字</th>
                                    <th>错误次数</th>
                                    <th>耗时/秒</th>
                                </tr>
                            </thead>
                            <tbody id="details-tbody"></tbody>
                        </table>
                    </div>

                    <div class="details-footer">
                        <button
                            class="btn btn-primary"
                            onclick="ConnectGame.backToResult()"
                        >
                            返回结果
                        </button>
                    </div>
                </div>

                <!-- 错误提示 Toast -->
                <div id="error-toast" class="error-toast">
                    <span id="error-message">请按顺序点击数字</span>
                </div>
            </div>
        </div>

        <script src="../js/utils.js"></script>
        <script src="../js/config.js"></script>
        <script src="../js/api.js"></script>
        <script src="../js/animation.js"></script>
        <script src="../js/scale.js"></script>
        <script src="../js/connect.js"></script>
    </body>
</html>
